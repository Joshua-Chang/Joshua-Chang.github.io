<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://Joshua-Chang.github.io</id>
    <title>Joshua-Chang`Blog</title>
    <updated>2020-11-07T14:32:37.284Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://Joshua-Chang.github.io"/>
    <link rel="self" href="https://Joshua-Chang.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://Joshua-Chang.github.io/images/avatar.png</logo>
    <icon>https://Joshua-Chang.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Joshua-Chang`Blog</rights>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://Joshua-Chang.github.io/post/hello-gridea/</id>
        <link href="https://Joshua-Chang.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Update MacOS to Mojave Vim: Caught deadly signal SEGV]]></title>
        <id>https://Joshua-Chang.github.io/post/Update-MacOS-to-Mojave-Vim-Caught-deadly-signal-SEGVE/</id>
        <link href="https://Joshua-Chang.github.io/post/Update-MacOS-to-Mojave-Vim-Caught-deadly-signal-SEGVE/">
        </link>
        <updated>2018-10-24T03:51:37.000Z</updated>
        <content type="html"><![CDATA[<h5 id="ææœ‰å¯èƒ½æ˜¯youcompletemeæˆ–è€…powerlineç­‰æ’ä»¶çš„é—®é¢˜">ææœ‰å¯èƒ½æ˜¯<em>YouCompleteMe</em>æˆ–è€…<em>Powerline</em>ç­‰æ’ä»¶çš„é—®é¢˜</h5>
<pre><code class="language-bash">Vim: Caught deadly signal SEGV

Error detected while processing function &lt;SNR&gt;78_PollServerReady[7]..&lt;SNR&gt;78_Pyeval:Vim: Finished.

line    4:
Exception MemoryError: MemoryError() in &lt;module 'threading' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.pyc'&gt; ignored
[1]    72868 segmentation fault  vim Test.java
</code></pre>
<h5 id="è§£å†³">è§£å†³ï¼š</h5>
<pre><code class="language-bash">brew install vim --with-lua --with-override-system-vi
</code></pre>
<p>and restart shell , fixed</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Appä½¿ç”¨ç»Ÿè®¡ä¸é™é»˜æ‹æ‘„]]></title>
        <id>https://Joshua-Chang.github.io/post/Appæ—¶å¸¸ç»Ÿè®¡ä¸é™é»˜æ‹æ‘„/</id>
        <link href="https://Joshua-Chang.github.io/post/Appæ—¶å¸¸ç»Ÿè®¡ä¸é™é»˜æ‹æ‘„/">
        </link>
        <updated>2018-10-03T10:29:46.000Z</updated>
        <content type="html"><![CDATA[<h3 id="appä½¿ç”¨ç»Ÿè®¡">Appä½¿ç”¨ç»Ÿè®¡</h3>
<p>ç›‘æ§æˆ–ç»Ÿè®¡æ‰‹æœºå†…çš„appä½¿ç”¨æƒ…å†µå¯ä»¥ä»ä¸¤ä¸ªæ€è·¯è€ƒè™‘</p>
<ul>
<li>
<p>ç»Ÿè®¡æ¯ä¸ªappçš„ä½¿ç”¨æ—¶é•¿</p>
<p>UsageStatsManagerè¿™ä¸€ç»Ÿè®¡ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥å‡ºæ¯ä¸ªappç®€å•çš„æœ€è¿‘å¼€å¯æ—¶é—´ã€æŸæ—¶é™å†…çš„ä½¿ç”¨æ—¶é•¿ç­‰ä¿¡æ¯ã€‚æ›´å¤æ‚çš„æ‰‹æœºäº®å±æ¬¡æ•°ï¼Œå¼€å¯<!--more-->åº”ç”¨æ¬¡æ•°å¯ä»¥ä½¿ç”¨UsageStatsServiceæˆ–è€…è¿‡æ»¤åŒ…åçš„å½¢å¼ç»Ÿè®¡ã€‚</p>
</li>
<li>
<p>ç»Ÿè®¡æ¯ä¸ªAndroidç³»ç»Ÿè€—ç”µæƒ…å†µçš„æ¯ä¸ªappå æ¯”</p>
<p>åœ¨åšç”µé‡ä¼˜åŒ–çš„æ—¶å€™ç»å¸¸ä¼šé€šè¿‡adbä½¿ç”¨Battery-Historianåˆ†æç”µé‡æŠ¥å‘Šï¼Œæ‰€ä»¥ç”±æ­¤çµæ„Ÿï¼Œå…·ä½“çš„å®ç°è¿˜éœ€è¦å¤´è„‘é£æš´ä¸€ä¸‹ã€‚</p>
</li>
</ul>
<h5 id="å¯¹appä½¿ç”¨æ—¶å¸¸ç»Ÿè®¡çš„ç®€å•å®ç°">å¯¹appä½¿ç”¨æ—¶å¸¸ç»Ÿè®¡çš„ç®€å•å®ç°</h5>
<ol>
<li>
<p>å¼€å¯ACTION_USAGE_ACCESS_SETTINGSæƒé™</p>
<figure data-type="image" tabindex="1"><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fvv9r2lhoyj308r0fkt9b.jpg" alt="" loading="lazy"></figure>
</li>
<li>
<p>å¾—åˆ°ä½¿ç”¨åˆ†æç®¡ç†UsageStatsManagerå¹¶æ ¹æ®æ—¶é™æŸ¥è¯¢ç»Ÿè®¡çŠ¶æ€</p>
<pre><code class="language-java">UsageStatsManager manager = (UsageStatsManager) getApplicationContext().getSystemService(USAGE_STATS_SERVICE);
List&lt;UsageStats&gt; stats = manager.queryUsageStats(UsageStatsManager.INTERVAL_MONTHLY, beginCal.getTimeInMillis(), endCal.getTimeInMillis());
</code></pre>
</li>
<li>
<p>æ ¹æ®UsageStatsæŸ¥è¯¢æ¯ä¸ªappçš„ç»Ÿè®¡ä¿¡æ¯</p>
<pre><code class="language-java">for (UsageStats us : stats) {
    try {
        PackageManager pm = getApplicationContext().getPackageManager();
        ApplicationInfo applicationInfo = pm.getApplicationInfo(us.getPackageName(), PackageManager.GET_META_DATA);
        if ((applicationInfo.flags &amp; applicationInfo.FLAG_SYSTEM) &lt;= 0) {
            sb.append(pm.getApplicationLabel(applicationInfo)+&quot; ä½¿ç”¨æ—¶é•¿ï¼š&quot;+formatTime(us.getTotalTimeInForeground())+&quot;\n&quot;);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fvv9r2tdo9j308r0fkabf.jpg" alt="" loading="lazy"></figure>
</li>
</ol>
<h3 id="é™é»˜åå°æ‹æ‘„">é™é»˜åå°æ‹æ‘„</h3>
<h5 id="é™é»˜æ‹æ‘„çš„ç®€å•æ€è·¯">é™é»˜æ‹æ‘„çš„ç®€å•æ€è·¯</h5>
<ul>
<li>
<p>å°†SurfaceViewæˆ–TextureViewè¿™ä¸€é‡‡é›†å‘ˆç°çš„layoutå‚æ•°è®¾ä¸ºæœ€å°ã€‚ï¼ˆä¸èƒ½è®¾ç½®visibilityï¼šgone ä¸ä¼šé‡‡é›†åˆ°å›¾åƒï¼‰ï¼Œå¯è§ç°åœ¨é‡‡é›†æ—¶æ²¡æœ‰é‡‡é›†é¢„è§ˆï¼Œä½†é‡‡é›†åˆ°çš„bitmapå¯ä»¥æˆåŠŸè®¾ç½®ã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://thumbs.gfycat.com/DenseFailingGroundhog-size_restricted.gif" alt="" loading="lazy"></figure>
</li>
<li>
<p>å†å°†SurfaceViewæ‰€åœ¨çš„Activityä¸»é¢˜é€æ˜åŒ–</p>
<p>å¯è§æ­¤æ—¶çš„é‡‡é›†æ•ˆæœä»UIä¸Šçœ‹é™é»˜è¿›è¡Œã€‚â€æ‹æ‘„â€œæŒ‰é”®åªæ˜¯æ–¹ä¾¿å±•ç¤ºæ•ˆæœï¼Œå¦‚æœä½¿ç”¨Serviceå»æ‰ç”¨åˆ™</p>
<p>çœŸæ­£å®ç°äº†åå°é™é»˜é‡‡é›†çš„æ•ˆæœï¼Œè‡³äºé‡‡é›†åˆ°bitmapå¯ä»¥å‚¨å­˜ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ä¸‰æ–¹sdkåšä¸€äº›å›¾åƒåˆ†æã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://thumbs.gfycat.com/SpryBeautifulChafer-size_restricted.gif" alt="" loading="lazy"></figure>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¼€å‘ä¸€ä¸ªIntelliJ IDEAæ’ä»¶]]></title>
        <id>https://Joshua-Chang.github.io/post/å¼€å‘ä¸€ä¸ªIntelliJ-IDEAæ’ä»¶/</id>
        <link href="https://Joshua-Chang.github.io/post/å¼€å‘ä¸€ä¸ªIntelliJ-IDEAæ’ä»¶/">
        </link>
        <updated>2017-12-26T16:03:17.000Z</updated>
        <content type="html"><![CDATA[<h3 id="çµæ„Ÿ">çµæ„Ÿ</h3>
<p>IDEAå’ŒASä¸­çš„å¤§å°å†™åˆ‡æ¢å¿«æ·é”®ï¼Œä¸€ç›´æ˜¯æ¯”è¾ƒè‰¯å¿ƒçš„ã€‚</p>
<p>åœ¨å£°æ˜ä¸€äº›å¸¸é‡æ—¶æå…¶çœäº‹ï¼Œä½†å¸¸é‡ç”±å¤šä¸ªå•è¯ç»„æˆæ—¶ï¼Œè¿˜è¦æ‰‹åŠ¨çš„åŠ ä¸Šä¸‹åˆ’çº¿åˆåŠå…¶éº»çƒ¦ã€‚</p>
<h3 id="æ€è·¯">æ€è·¯</h3>
<p>å¼€å‘ä¸€ä¸ªæ’ä»¶ï¼ŒæŠŠç¬¦åˆé©¼å³°å‘½åçš„å¤šå•è¯ç»„æˆåå­—ï¼Œåˆ†åˆ«åŠ ä¸Šä¸‹åˆ’çº¿ã€‚åä¹‹ï¼ŒæŠŠç”±ä¸‹åˆ’çº¿æ‹¼æˆçš„åå­—å˜æˆé©¼å³°<!--more--></p>
<p>å‘½åã€‚</p>
<h3 id="eg">e.g.</h3>
<ul>
<li>
<p>light_dialog_type --&gt; lightDialogType</p>
</li>
<li>
<p>anApplePie --&gt; an_apple_pie</p>
</li>
<li>
<p>homeActivityTimer --&gt;home_activity_timer --&gt; HOME_ACTIVITY_TIMER</p>
</li>
</ul>
<h3 id="å®ç°">å®ç°</h3>
<ol>
<li>æ–°å»ºä¸€ä¸ªIntelliJ Platform Pluginé¡¹ç›®ï¼Œåˆ›å»ºç›¸åº”çš„actionå¤å†™actionPerformed()</li>
<li>å¾—åˆ°AS/IDEAé€‰ä¸­çš„å¸¸é‡å</li>
</ol>
<pre><code class="language-java">       //è·å–Editorå’ŒProjectå¯¹è±¡
        Editor editor = e.getData(PlatformDataKeys.EDITOR);
        Project project = e.getData(PlatformDataKeys.PROJECT);
        if (editor == null || project == null)
            return;

        //è·å–SelectionModelå’ŒDocumentå¯¹è±¡
        SelectionModel selectionModel = editor.getSelectionModel();
        Document document = editor.getDocument();

        selectionModel.selectWordAtCaret(false);
        //æ‹¿åˆ°é€‰ä¸­éƒ¨åˆ†å­—ç¬¦ä¸²
        String selectedText = selectionModel.getSelectedText();

        //å¾—åˆ°é€‰ä¸­å­—ç¬¦ä¸²çš„èµ·å§‹å’Œç»“æŸä½ç½®
        int startOffset = selectionModel.getSelectionStart();
        int endOffset = selectionModel.getSelectionEnd();
</code></pre>
<ol start="3">
<li>æ–°çº¿ç¨‹ä¸­å»æ‰§è¡Œé©¼å³°å‘½åä¸ä¸‹åˆ’çº¿çš„è½¬æ¢æ“ä½œ</li>
</ol>
<pre><code class="language-java">        //å¯¹æ–‡æ¡£è¿›è¡Œæ“ä½œéƒ¨åˆ†ä»£ç ï¼Œéœ€è¦æ”¾å…¥Runnableæ¥å£ä¸­å®ç°ï¼Œç”±IDEAåœ¨å†…éƒ¨å°†å…¶é€šè¿‡ä¸€ä¸ªæ–°çº¿ç¨‹æ‰§è¡Œ
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                if (isLine(selectedText)) {
                    document.replaceString(startOffset, endOffset, lineToHump(selectedText));
                }else {
                    String temp=null;
                    if (selectedText.charAt(0) == 'm' &amp;&amp; selectedText.charAt(1) &lt;= 'Z' &amp;&amp; selectedText.charAt(1) &gt;= 'A') {//æƒ…å†µä¸€ï¼šæŠŠmActivityInstanceè¿™ç§å˜ä¸ºActivityInstance
                        temp = selectedText.substring(1);
                    }
                    String result = temp != null ? temp : selectedText;
                    result=humpToLine(result);
                    if (result.charAt(0)=='_') {
                        result=result.substring(1);
                    }
                    document.replaceString(startOffset, endOffset, result);
                }
            }
        };
</code></pre>
<ol start="4">
<li>åŠ å…¥ä»»åŠ¡ï¼Œç”±IDEAè°ƒåº¦æ‰§è¡Œè¿™ä¸ªä»»åŠ¡</li>
</ol>
<pre><code class="language-java">WriteCommandAction.runWriteCommandAction(project, runnable);
</code></pre>
<ol start="5">
<li>å…¶ä»–ï¼šè½¬æ¢æ–¹æ³•éƒ½æ˜¯äº›å¸¸ç”¨ç®—æ³•ä¸åšèµ˜è¿°ï¼›Actionçš„updateæ–¹æ³•çœ‹éœ€æ±‚æƒ…å†µç¼–å†™ã€‚</li>
</ol>
<h3 id="å®Œå·¥">å®Œå·¥</h3>
<p>å‘å¸ƒåœ¨JetBrainsç»™æææ„è§ï¼š<a href="https://plugins.jetbrains.com/plugin/11121-underline-camel-toggle-case">Underline Camel Toggle Case</a> æˆ–åœ¨AS/IDEAçš„pluginä¸­æœç´¢</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Viewæ»‘åŠ¨çš„å‡ ç§æ–¹å¼]]></title>
        <id>https://Joshua-Chang.github.io/post/Viewæ»‘åŠ¨çš„å‡ ç§æ–¹å¼/</id>
        <link href="https://Joshua-Chang.github.io/post/Viewæ»‘åŠ¨çš„å‡ ç§æ–¹å¼/">
        </link>
        <updated>2017-09-28T06:27:58.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="viewçš„æ»‘åŠ¨">Viewçš„æ»‘åŠ¨</h3>
<p>å®ç°Viewæ»‘åŠ¨å¤§æ¦‚æœ‰ï¼šlayout()ã€offsetLeftAndRight()ï¼offsetTopAndBottom()ã€LayoutParamsã€åŠ¨ç”»ã€scollToä¸scollByå’ŒScrollerç­‰å‡ ç§æ–¹æ³•ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="viewçš„æ»‘åŠ¨">Viewçš„æ»‘åŠ¨</h3>
<p>å®ç°Viewæ»‘åŠ¨å¤§æ¦‚æœ‰ï¼šlayout()ã€offsetLeftAndRight()ï¼offsetTopAndBottom()ã€LayoutParamsã€åŠ¨ç”»ã€scollToä¸scollByå’ŒScrollerç­‰å‡ ç§æ–¹æ³•ã€‚</p>
<!--more-->
<h3 id="layout">layout()</h3>
<pre><code class="language-java">layout(getLeft()+offsetX, getTop()+offsetY,getRight()+offsetX , getBottom()+offsetY);
</code></pre>
<h3 id="offset">offset</h3>
<pre><code class="language-java">offsetLeftAndRight(offsetX);
offsetTopAndBottom(offsetY);
</code></pre>
<h3 id="layoutparams">LayoutParams</h3>
<pre><code class="language-java">ViewGroup.MarginLayoutParams layoutParams = (ViewGroup.MarginLayoutParams) getLayoutParams();
layoutParams.leftMargin = getLeft() + offsetX;
layoutParams.topMargin = getTop() + offsetY;
setLayoutParams(layoutParams);
</code></pre>
<h3 id="scollby">scollBy</h3>
<p>åå‘ç§»åŠ¨çˆ¶å¸ƒå±€ç”»å¸ƒ</p>
<pre><code class="language-java">((View)getParent()).scrollBy(-offsetX,-offsetY);
</code></pre>
<h3 id="scroller">Scroller</h3>
<ul>
<li>åˆå§‹åŒ–Scroller</li>
</ul>
<pre><code class="language-java">public CustomView(Context context, AttributeSet attrs) {
      super(context, attrs);
      mScroller = new Scroller(context);
  }
</code></pre>
<ul>
<li>
<p>å¤å†™computeScroll()  åœ¨ç»˜åˆ¶Viewçš„æ—¶å€™åœ¨draw()ä¸­è°ƒç”¨è¯¥æ–¹æ³•</p>
<p>è°ƒç”¨çˆ¶ç±»çš„scrollTo()æ–¹æ³•å¹¶é€šè¿‡Scrolleræ¥ä¸æ–­è·å–å½“å‰çš„æ»šåŠ¨å€¼ï¼Œå¹¶è°ƒç”¨invalidate()ä¸æ–­é‡ç»˜ï¼Œé‡ç»˜å°±ä¼šè°ƒç”¨computeScroll()æ–¹æ³•ï¼Œè¿è´¯æˆç§»åŠ¨</p>
</li>
</ul>
<pre><code class="language-java">@Override
public void computeScroll() {
    super.computeScroll();
    if(mScroller.computeScrollOffset()){
        ((View) getParent()).scrollTo(mScroller.getCurrX(),mScroller.getCurrY());
         //é€šè¿‡ä¸æ–­çš„é‡ç»˜ä¸æ–­çš„è°ƒç”¨computeScrollæ–¹æ³•
         invalidate();
    }  
}
</code></pre>
<ul>
<li>startScroll()</li>
</ul>
<pre><code class="language-java">public void smoothScrollTo(int destX,int destY){
      int scrollX=getScrollX();
      int delta=destX-scrollX;
      //1000ç§’å†…æ»‘å‘destX
      mScroller.startScroll(scrollX,0,delta,0,2000);
      invalidate();
  }
</code></pre>
<ul>
<li>å¤–éƒ¨è°ƒç”¨</li>
</ul>
<pre><code class="language-java">mCustomView.smoothScrollTo(-400,0);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[TabLayout indicatorå®½åº¦å·¥å…·ç±»]]></title>
        <id>https://Joshua-Chang.github.io/post/TabLayout-indicatorå®½åº¦å·¥å…·ç±»/</id>
        <link href="https://Joshua-Chang.github.io/post/TabLayout-indicatorå®½åº¦å·¥å…·ç±»/">
        </link>
        <updated>2017-09-22T13:35:36.000Z</updated>
        <summary type="html"><![CDATA[<h4 id="å®½åº¦å·¥å…·ç±»">å®½åº¦å·¥å…·ç±»</h4>
<p>ä¸€åŠ³æ°¸é€¸ä¹‹æ³•</p>
]]></summary>
        <content type="html"><![CDATA[<h4 id="å®½åº¦å·¥å…·ç±»">å®½åº¦å·¥å…·ç±»</h4>
<p>ä¸€åŠ³æ°¸é€¸ä¹‹æ³•</p>
<!--more-->
<pre><code class="language-java">public void reflex(final TabLayout tabLayout){
    //äº†è§£æºç å¾—çŸ¥ çº¿çš„å®½åº¦æ˜¯æ ¹æ® tabViewçš„å®½åº¦æ¥è®¾ç½®çš„
    tabLayout.post(new Runnable() {
        @Override
        public void run() {
            try {
                //æ‹¿åˆ°tabLayoutçš„mTabStripå±æ€§
                LinearLayout mTabStrip = (LinearLayout) tabLayout.getChildAt(0);

                int dp10 = dp2px(tabLayout.getContext(), 10);

                for (int i = 0; i &lt; mTabStrip.getChildCount(); i++) {
                    View tabView = mTabStrip.getChildAt(i);

                    //æ‹¿åˆ°tabViewçš„mTextViewå±æ€§  tabçš„å­—æ•°ä¸å›ºå®šä¸€å®šç”¨åå°„å–mTextView
                    Field mTextViewField = tabView.getClass().getDeclaredField(&quot;mTextView&quot;);
                    mTextViewField.setAccessible(true);

                    TextView mTextView = (TextView) mTextViewField.get(tabView);

                    tabView.setPadding(0, 0, 0, 0);

                    //å› ä¸ºæˆ‘æƒ³è¦çš„æ•ˆæœæ˜¯   å­—å¤šå®½çº¿å°±å¤šå®½ï¼Œæ‰€ä»¥æµ‹é‡mTextViewçš„å®½åº¦
                    int width = 0;
                    width = mTextView.getWidth();
                    if (width == 0) {
                        mTextView.measure(0, 0);
                        width = mTextView.getMeasuredWidth();
                    }

                    //è®¾ç½®tabå·¦å³é—´è·ä¸º10dp  æ³¨æ„è¿™é‡Œä¸èƒ½ä½¿ç”¨Padding å› ä¸ºæºç ä¸­çº¿çš„å®½åº¦æ˜¯æ ¹æ® tabViewçš„å®½åº¦æ¥è®¾ç½®çš„
                    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) tabView.getLayoutParams();
                    params.width = width ;
                    params.leftMargin = dp10;
                    params.rightMargin = dp10;
                    tabView.setLayoutParams(params);

                    tabView.invalidate();
                }

            } catch (NoSuchFieldException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
    });

}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[IPCæœºåˆ¶ä¹‹Messenger]]></title>
        <id>https://Joshua-Chang.github.io/post/IPCæœºåˆ¶ä¹‹Messenger/</id>
        <link href="https://Joshua-Chang.github.io/post/IPCæœºåˆ¶ä¹‹Messenger/">
        </link>
        <updated>2017-06-02T02:42:31.000Z</updated>
        <summary type="html"><![CDATA[<h4 id="æ¦‚å¿µ">æ¦‚å¿µ</h4>
<p>Messengeræ˜¯ä¸€ç§è½»é‡çº§çš„IPCæ–¹æ¡ˆï¼Œå®ƒçš„åº•å±‚å®ç°æ˜¯AIDLï¼Œé€šè¿‡Messengerå¯ä»¥åœ¨ä¸åŒè¿›ç¨‹ä¸­ä¼ é€’Messageå¯¹è±¡ï¼Œåœ¨Messageä¸­æ”¾å…¥æˆ‘ä»¬éœ€è¦ä¼ é€’çš„æ•°æ®å°±å¯ä»¥è½»æ¾å®ç°æ•°æ®åœ¨è¿›ç¨‹é—´ä¼ é€’äº†ã€‚</p>
<p>åœ¨Messengerä¸­è¿›è¡Œæ•°æ®ä¼ é€’å¿…é¡»å°†æ•°æ®æ”¾å…¥Messageä¸­ï¼Œè€ŒMessengerå’ŒMessageéƒ½å®ç°äº†Parcelableæ¥å£ï¼Œå› æ­¤å¯ä»¥è·¨è¿›ç¨‹ä¼ è¾“ã€‚</p>
<p>Messengerçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œç”±äºå®ƒä¸€æ¬¡å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå› æ­¤åœ¨æœåŠ¡ç«¯ä¸ç”¨è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚Messengerå®ç°è¿›ç¨‹é—´é€šä¿¡å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼Œåˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h4 id="æ¦‚å¿µ">æ¦‚å¿µ</h4>
<p>Messengeræ˜¯ä¸€ç§è½»é‡çº§çš„IPCæ–¹æ¡ˆï¼Œå®ƒçš„åº•å±‚å®ç°æ˜¯AIDLï¼Œé€šè¿‡Messengerå¯ä»¥åœ¨ä¸åŒè¿›ç¨‹ä¸­ä¼ é€’Messageå¯¹è±¡ï¼Œåœ¨Messageä¸­æ”¾å…¥æˆ‘ä»¬éœ€è¦ä¼ é€’çš„æ•°æ®å°±å¯ä»¥è½»æ¾å®ç°æ•°æ®åœ¨è¿›ç¨‹é—´ä¼ é€’äº†ã€‚</p>
<p>åœ¨Messengerä¸­è¿›è¡Œæ•°æ®ä¼ é€’å¿…é¡»å°†æ•°æ®æ”¾å…¥Messageä¸­ï¼Œè€ŒMessengerå’ŒMessageéƒ½å®ç°äº†Parcelableæ¥å£ï¼Œå› æ­¤å¯ä»¥è·¨è¿›ç¨‹ä¼ è¾“ã€‚</p>
<p>Messengerçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œç”±äºå®ƒä¸€æ¬¡å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå› æ­¤åœ¨æœåŠ¡ç«¯ä¸ç”¨è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚Messengerå®ç°è¿›ç¨‹é—´é€šä¿¡å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼Œåˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚</p>
<!--more-->
<h4 id="æœåŠ¡ç«¯è¿›ç¨‹">æœåŠ¡ç«¯è¿›ç¨‹</h4>
<p>æœåŠ¡ç«¯æ–°å»ºä¸€ä¸ªServiceæ¥å¤„ç†å®¢æˆ·ç«¯å‘èµ·çš„è¯·æ±‚ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªHandlerå¹¶é€šè¿‡å®ƒæ¥åˆ›å»ºä¸€ä¸ªMessengerå¯¹è±¡ï¼Œç„¶ååœ¨Serviceçš„onBindä¸­è¿”å›è¿™ä¸ªMessengerå¯¹è±¡åº•å±‚çš„Binderå³å¯ã€‚</p>
<p>å¦‚æœéœ€è¦å®¢æœç«¯èƒ½å¤Ÿå›åº”å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå’ŒæœåŠ¡ç«¯ä¸€æ ·ï¼Œåœ¨å®¢æˆ·ç«¯è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„Messenger,å¹¶æŠŠè¿™ä¸ªMessengerå¯¹è±¡é€šè¿‡Messageçš„replyToå‚æ•°ä¼ é€’ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯é€šè¿‡è¿™ä¸ªreplyToå‚æ•°å°±å¯ä»¥å›åº”å®¢æˆ·ç«¯ã€‚</p>
<pre><code class="language-java">public class MyService extends Service {
    public static final int MSG_FROM_SERVICE=2;
    public MyService() {}
    public static class MessagerHandler extends Handler{
        @Override
        public void handleMessage(Message msg) {
            if (msg.what==MainActivity.MSG_FROM_CLIENT){
                Log.e(&quot;xxx&quot;,&quot;msg from client: &quot;+msg.getData().getString(&quot;msg&quot;));

                Messenger mReplyTo = msg.replyTo;
                Message mMessage=Message.obtain(null,MSG_FROM_SERVICE);
                Bundle mBundle=new Bundle();
                mBundle.putString(&quot;reply&quot;,&quot;Hi,service received succeed&quot;);
                mMessage.setData(mBundle);
                try {
                    mReplyTo.send(mMessage);
                } catch (RemoteException e) {
                    e.printStackTrace();
                }
            }
        }
    }
  //1.åˆ›å»ºMessengerï¼ˆéœ€è¦handlerï¼‰å¯¹è±¡
    private Messenger mMessenger=new Messenger(new MessagerHandler());
    @Override
    public IBinder onBind(Intent intent) {
      //2.åœ¨Serviceçš„onBindä¸­è¿”å›è¿™ä¸ªMessengerå¯¹è±¡åº•å±‚çš„Binder ä¾›å®¢æˆ·ç«¯ä½¿ç”¨
        return mMessenger.getBinder();
    }
}
</code></pre>
<h4 id="å®¢æˆ·ç«¯è¿›ç¨‹">å®¢æˆ·ç«¯è¿›ç¨‹</h4>
<p>å®¢æˆ·ç«¯è¿›ç¨‹ä¸­é¦–å…ˆè¦ç»‘å®šæœåŠ¡ç«¯çš„Serviceï¼Œç»‘å®šæˆåŠŸåç”¨æœåŠ¡ç«¯è¿”å›çš„IBinderå¯¹è±¡åˆ›å»ºä¸€ä¸ªMessengerï¼Œé€šè¿‡è¿™ä¸ªMessengerå°±å¯ä»¥å‘æœåŠ¡ç«¯å‘é€ç±»å‹ä¸ºMessageçš„æ¶ˆæ¯äº†ï¼Œmessageå†…å¯ä»¥å­˜å…¥Bundleã€‚</p>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    public static final int MSG_FROM_CLIENT=1;

    private ServiceConnection mServiceConnection=new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
          //2.ç»‘å®šæˆåŠŸå,æ ¹æ®ä¸Šæ–‡è¿”å›çš„IBinderå¯¹è±¡åˆ›å»ºä¸€ä¸ªMessenger
            Messenger mMessenger=new Messenger(service);
            Message mMessage = Message.obtain(null, MSG_FROM_CLIENT);
            Bundle mBundle=new Bundle();
            mBundle.putString(&quot;msg&quot;,&quot;hello,this msg from client&quot;);
            mMessage.setData(mBundle);

            mMessage.replyTo=mReplyMessenger;
            try {
                mMessenger.send(mMessage);
            } catch (RemoteException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {

        }
    };
    private static class ReceiveHandler extends Handler{
        @Override
        public void handleMessage(Message msg) {
            if (msg.what==MyService.MSG_FROM_SERVICE){
                Log.e(&quot;xxx&quot;,&quot;msg from service: &quot;+msg.getData().getString(&quot;reply&quot;));
            }
        }
    }
    private Messenger mReplyMessenger=new Messenger(new ReceiveHandler());

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
      //1.ç»‘å®šæœåŠ¡ç«¯çš„Service
        Intent mIntent=new Intent(this,MyService.class);
        bindService(mIntent,mServiceConnection,BIND_AUTO_CREATE);
    }

    @Override
    protected void onDestroy() {
        unbindService(mServiceConnection);
        super.onDestroy();
    }
}
</code></pre>
<h4 id="extra">Extra</h4>
<p>æ³¨å†Œserviceæ—¶ä¸ºæ–°çš„å…¨å±€è¿›ç¨‹</p>
<pre><code class="language-xml">&lt;service
    android:name=&quot;.MyService&quot;
    android:process=&quot;com.coolapk.developer_verify_package&quot;&gt;
&lt;/service&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[dagger2çš„Qualifierä¸Scope]]></title>
        <id>https://Joshua-Chang.github.io/post/dagger2çš„Qualifierä¸Scope/</id>
        <link href="https://Joshua-Chang.github.io/post/dagger2çš„Qualifierä¸Scope/">
        </link>
        <updated>2017-05-21T11:18:57.000Z</updated>
        <summary type="html"><![CDATA[<h4 id="qualifierå³named">Qualifierå³Named</h4>
<p>å½“moduleçš„@Providesæä¾›ç›¸åŒå˜é‡çš„ä¸åŒå±æ€§æ—¶ï¼šç”¨äºåŒºåˆ†æŠŠå“ªä¸€ä¸ªåˆå§‹åŒ–</p>
<h5 id="module">Module</h5>
<pre><code class="language-java">@Module
public class ClothModule {
    @Blue
    @Provides
    public Cloth getBluecloth(){
        Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;è“&quot;);
        return mCloth;
    }
    @Named(&quot;Red&quot;)
    @Provides
    public Cloth getRedcloth(){
        Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;çº¢&quot;);
        return mCloth;
    }
}
</code></pre>
]]></summary>
        <content type="html"><![CDATA[<h4 id="qualifierå³named">Qualifierå³Named</h4>
<p>å½“moduleçš„@Providesæä¾›ç›¸åŒå˜é‡çš„ä¸åŒå±æ€§æ—¶ï¼šç”¨äºåŒºåˆ†æŠŠå“ªä¸€ä¸ªåˆå§‹åŒ–</p>
<h5 id="module">Module</h5>
<pre><code class="language-java">@Module
public class ClothModule {
    @Blue
    @Provides
    public Cloth getBluecloth(){
        Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;è“&quot;);
        return mCloth;
    }
    @Named(&quot;Red&quot;)
    @Provides
    public Cloth getRedcloth(){
        Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;çº¢&quot;);
        return mCloth;
    }
}
</code></pre>
<!--more-->
<h5 id="component">Component</h5>
<pre><code class="language-java">@Component(modules=ClothModule.class)
public interface ClothCompetent {
    void inject(MainActivity mainActivity);
}
</code></pre>
<h5 id="activity">Activity</h5>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    TextView mTextView;
    @Named(&quot;Red&quot;)
    @Inject
    Cloth mClothRed;
    @Blue
    @Inject
    Cloth mClothBlue;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mTextView= (TextView) findViewById(R.id.tv1);
        ClothCompetent mClothCompetent=DaggerClothCompetent.builder().clothModule(new ClothModule()).build();
        mClothCompetent.inject(this);
        mTextView.setText(mClothRed+&quot;\n&quot;+mClothBlue);
    }
}
</code></pre>
<h5 id="qualifier">Qualifier</h5>
<p>è‡ªå®šä¹‰çš„Qualifierä¸å®˜æ–¹çš„NamedåŸç†ä¸€æ ·</p>
<pre><code class="language-java">@Qualifier
@Retention(RetentionPolicy.RUNTIME)
public @interface Blue {
}
</code></pre>
<p>å®˜æ–¹çš„Named</p>
<pre><code class="language-java">@Qualifier
@Documented
@Retention(RUNTIME)
public @interface Named {

    /** The name. */
    String value() default &quot;&quot;;
}
</code></pre>
<h4 id="scopeå³singleton">Scopeå³Singleton</h4>
<p>ä»¥Componentä¸ºä¾æ®ï¼Œåœ¨æŒ‡å®šèŒƒå›´å†…çš„å•ä¾‹</p>
<h5 id="module-2">Module</h5>
<ol>
<li>åœ¨@Providesä¸ºå¤–ç•Œæä¾›Jacketæ—¶ï¼Œå‚æ•°ä¸­ç”¨åˆ°äº†Clothï¼Œå¿…é¡»åœ¨Moduleä¸­@Providesä¸ºJacketæä¾›Cloth</li>
<li>è‡ªå®šä¹‰çš„Qualifierå’ŒNamedä¹Ÿå¯ä»¥åœ¨å‚æ•°ä¸­ä½¿ç”¨</li>
</ol>
<pre><code class="language-java">@Module
public class JacketModule {
    @Provides
    public Jacket getJacket(@Named(&quot;Red&quot;) Cloth cloth){
        return new Jacket(cloth);
    }
    @Singleton
    @Named(&quot;Red&quot;)
    @Provides
    public Cloth getRedCloth(){
       Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;çº¢&quot;);
        return mCloth;
    }
    @Blue
    @Provides
    public Cloth getBluecloth(){
        Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;è“&quot;);
        return mCloth;
    }
}
</code></pre>
<h5 id="component-2">Component</h5>
<p>åœ¨ç”¨åˆ°çš„Clothå’ŒComponentä¸ŠåŒæ—¶æ·»åŠ @Singletonï¼Œæ­¤æ—¶Clothä¸ºå•ä¾‹</p>
<pre><code class="language-java">@Singleton
@Component(modules = JacketModule.class)
public interface JacketComponent {
    void inject(MainActivity mainActivity);
}
</code></pre>
<h5 id="activity-2">Activity</h5>
<p>æ­¤æ—¶çš„Clothå’ŒJacketRed.getCloth()ä¸ºåŒä¸€ä¸ª</p>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    TextView mTextView;
    @Named(&quot;Red&quot;)
    @Inject
    Cloth mClothRed;
    @Inject
    Jacket mJacketRed;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mTextView= (TextView) findViewById(R.id.tv1);
        JacketComponent mJacketComponent = DaggerJacketComponent.builder().jacketModule(new JacketModule()).build();
        mJacketComponent.inject(this);
        mTextView.setText((mJacketRed.getCloth() == mClothRed) + &quot;&quot;);
    }
}
</code></pre>
<h5 id="scope">Scope</h5>
<p>è‡ªå®šä¹‰çš„Scopeä¸å®˜æ–¹çš„SingletonåŸç†ä¸€æ ·ï¼Œæ›¿æ¢Singletonä¸ºJacketSingletonä»è¿”å›true</p>
<p>è‡ªå®šä¹‰çš„JacketSingletonï¼šåœ¨JacketSingletonä½œç”¨åŸŸå†…å•ä¾‹</p>
<pre><code class="language-java">@Scope
@Retention(RetentionPolicy.RUNTIME)
public @interface JacketSingleton {
}
</code></pre>
<p>å®˜æ–¹çš„Singleton</p>
<pre><code class="language-java">@Scope
@Documented
@Retention(RUNTIME)
public @interface Singleton {}
</code></pre>
<h4 id="dependencies">dependencies</h4>
<p>å®ä¾‹ï¼šåˆ†åˆ«åˆ›å»ºä¸¤ä¸ªActivityï¼Œè·³è½¬åçš„å®ä¾‹ä¸ºåŒä¸€ä¸ªï¼ˆå·¥å…·ç±»å¤šæ­¤ç”¨æ³•åœ¨appå±‚å•ä¾‹ï¼‰</p>
<h5 id="åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªmodule">åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªModule</h5>
<p>JacketModuleä¸JacketModule2</p>
<h5 id="åˆ›å»ºcomponent">åˆ›å»ºComponent</h5>
<h6 id="æ–¹æ³•ä¸€dependencies">æ–¹æ³•ä¸€ï¼šdependencies</h6>
<pre><code class="language-java">@JacketSingleton
@Component(modules = JacketModule.class,dependencies = BaseComponent.class)
public interface JacketComponent {
    void inject(MainActivity mainActivity);
}
</code></pre>
<h6 id="æ–¹æ³•äºŒsubcomponent">æ–¹æ³•äºŒï¼šSubcomponent</h6>
<pre><code class="language-java">@JacketSingleton
@Subcomponent(modules = JacketModule2.class)
public interface JacketComponent2 {
    void inject(MainActivity2 mainActivity);
}
</code></pre>
<h5 id="åˆ›å»ºbasemodule">åˆ›å»ºBaseModule</h5>
<pre><code class="language-java">@Module
public class BaseModule {
    @Singleton
    @Provides
    public Jacket getJacket(@Named(&quot;Red&quot;) Cloth cloth){
        return new Jacket(cloth);
    }
    @Singleton
    @Provides
    @Named(&quot;Red&quot;)
    public Cloth getRedCloth(){
        Cloth mCloth=new Cloth();
        mCloth.setColor(&quot;çº¢&quot;);
        return mCloth;
    }
}
</code></pre>
<h5 id="åˆ›å»ºbasecomponent">åˆ›å»ºBaseComponent</h5>
<pre><code class="language-java">@Singleton
@Component(modules = BaseModule.class)
public interface BaseComponent {
    Jacket getJacket();//dependenciesä¾èµ–å£°æ˜çš„æ–¹å¼
    JacketComponent2 getJacketComponent2(JacketModule2 jacketModule2);//@Subcomponentä½¿ç”¨çš„å£°æ˜æ–¹å¼,å£°æ˜ä¸€ä¸ªè¿”å›å€¼ä¸ºå­ç»„ä»¶çš„æ–¹æ³•,å­ç»„ä»¶éœ€è¦ä»€ä¹ˆModule,å°±åœ¨æ–¹æ³•å‚æ•°ä¸­æ·»åŠ ä»€ä¹ˆ
}
</code></pre>
<h5 id="åœ¨appä¸­åˆå§‹åŒ–basecomponent">åœ¨appä¸­åˆå§‹åŒ–BaseComponent</h5>
<pre><code class="language-java">public class App extends Application {
        private BaseComponent baseComponent;
        @Override
        public void onCreate() {
            super.onCreate();
            baseComponent = DaggerBaseComponent.builder().baseModule(new BaseModule()).build();
        }

        public BaseComponent getBaseComponent() {
            return baseComponent;
        }
}
</code></pre>
<h5 id="åœ¨ä¸¤ä¸ªactivityä¸­ä½¿ç”¨">åœ¨ä¸¤ä¸ªActivityä¸­ä½¿ç”¨</h5>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    TextView mTextView;
    @Named(&quot;Red&quot;)
    @Inject
    Cloth mClothRed;
    @Inject
    Jacket mJacketRed;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mTextView= (TextView) findViewById(R.id.tv1);
        JacketComponent mJacketComponent = DaggerJacketComponent.builder().baseComponent(((App) getApplication()).getBaseComponent()).jacketModule(new JacketModule()).build();
        mJacketComponent.inject(this);
        mTextView.setText(mJacketRed.hashCode()+&quot;&quot;);
    }
    public void go(View view) {
        Intent intent = new Intent(this,MainActivity2.class);
        intent.putExtra(&quot;xx&quot;,mJacketRed.hashCode()+&quot;&quot;);
        startActivity(intent);
    }
}
</code></pre>
<pre><code class="language-java">public class MainActivity2 extends AppCompatActivity {
    TextView mTextView;
    @Named(&quot;Red&quot;)
    @Inject
    Cloth mClothRed;
    @Inject
    Jacket mJacketRed;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);
        mTextView= (TextView) findViewById(R.id.tv2);
        App application = (App) getApplication();
        application.getBaseComponent().getJacketComponent2(new JacketModule2()).inject(this);
        String mString = (String) getIntent().getExtras().get(&quot;xx&quot;);
        mTextView.setText(mString+&quot;\n&quot;+mJacketRed.hashCode()+&quot;&quot;);
    }
}
</code></pre>
<h5 id="ç»“è®º">ç»“è®º</h5>
<p>åˆ†åˆ«åœ¨ä¸¤ä¸ªActivityä¸­åˆå§‹åŒ–çš„Jacketå“ˆå¸Œå€¼ç›¸åŒï¼Œä¸ºåŒä¸€ä¸ªå˜é‡ï¼Œappå±‚å•ä¾‹ã€‚</p>
<h4 id="lazyä¸provider">Lazyä¸Provider</h4>
<p>Lazyç”¨äºå»¶è¿ŸåŠ è½½,æ‰€è°“çš„æ‡’åŠ è½½å°±æ˜¯å½“ä½ éœ€è¦ç”¨åˆ°è¯¥ä¾èµ–å¯¹è±¡æ—¶,Dagger2æ‰å¸®ä½ å»è·å–ä¸€ä¸ª;Provideç”¨äºå¼ºåˆ¶é‡æ–°åŠ è½½,ä¹Ÿå°±æ˜¯æ¯ä¸€è¦ç”¨åˆ°ä¾èµ–å¯¹è±¡æ—¶,Dagger2éƒ½ä¼šå¸®ä½ ä¾èµ–æ³¨å…¥ä¸€æ¬¡</p>
<pre><code class="language-java">    @Inject //Lazyå£°æ˜æ–¹å¼
    Lazy&lt;Cloth&gt; redCloth;
    @Inject //Providerå£°æ˜æ–¹å¼
    Provider&lt;Shoe&gt; shoe;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[dagger2ç”±ç®€å…¥æ·±]]></title>
        <id>https://Joshua-Chang.github.io/post/dagger2ç”±ç®€å…¥æ·±/</id>
        <link href="https://Joshua-Chang.github.io/post/dagger2ç”±ç®€å…¥æ·±/">
        </link>
        <updated>2017-05-21T06:47:07.000Z</updated>
        <summary type="html"><![CDATA[<p>Dagger2æ˜¯Androidä¸­æ¯”è¾ƒçƒ­é—¨çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ã€‚æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™ä¸ºIoCï¼‰ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç”¨æ¥å‡ä½è®¡ç®—æœºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚å…¶ä¸­æœ€å¸¸è§çš„æ–¹å¼å«åšä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰</p>
]]></summary>
        <content type="html"><![CDATA[<p>Dagger2æ˜¯Androidä¸­æ¯”è¾ƒçƒ­é—¨çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ã€‚æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™ä¸ºIoCï¼‰ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç”¨æ¥å‡ä½è®¡ç®—æœºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚å…¶ä¸­æœ€å¸¸è§çš„æ–¹å¼å«åšä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰</p>
<!--more-->
<h4 id="gradleå¼•å…¥">Gradleå¼•å…¥</h4>
<p>é¡¹ç›®ä¸‹</p>
<pre><code>//æ·»åŠ aptæ’ä»¶
        classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'
</code></pre>
<p>appä¸‹</p>
<pre><code>apply plugin: 'com.neenbedankt.android-apt'
   
   
   //å¼•å…¥dagger2
compile 'com.google.dagger:dagger:2.4'
    apt 'com.google.dagger:dagger-compiler:2.4'
    //javaæ³¨è§£
    provided 'org.glassfish:javax.annotation:10.0-b28'
</code></pre>
<h3 id="æ­£å¸¸åˆ›å»ºæ–¹æ³•">æ­£å¸¸åˆ›å»ºæ–¹æ³•</h3>
<h4 id="åˆ›å»ºbeanç±»">åˆ›å»ºbeanç±»</h4>
<pre><code class="language-java">public class Cloth {
    private String color;

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    @Override
    public String toString() {
        return color + &quot;å¸ƒæ–™&quot;;
    }
}
</code></pre>
<h4 id="åˆ›å»ºmoduleç±»">åˆ›å»ºModuleç±»</h4>
<pre><code class="language-java">@Module
public class MainModule {
    @Provides
    public Cloth getCloth() {
        Cloth cloth = new Cloth();
        cloth.setColor(&quot;çº¢è‰²&quot;);
        return cloth;
    }
}
</code></pre>
<h4 id="åˆ›å»ºcomponentæ¥å£">åˆ›å»ºComponentæ¥å£</h4>
<pre><code class="language-java">@Component(modules=MainModule.class)
public interface MainComponent {
    void inject(MainActivity mainActivity);
}
</code></pre>
<h4 id="åœ¨mainactivityä¸­å£°æ˜å…ˆrebuildä¸€ä¸‹">åœ¨MainActivityä¸­å£°æ˜ï¼ˆå…ˆRebuildä¸€ä¸‹ï¼‰</h4>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    private TextView tv;
    @Inject
    Cloth cloth;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.tv);
        MainComponent build = DaggerMainComponent.builder().mainModule(new MainModule()).build();
        build.inject(this);
        tv.setText(&quot;æˆ‘ç°åœ¨æœ‰&quot; + cloth);
    }
}
</code></pre>
<h3 id="æç®€åˆ›å»ºæ–¹æ³•">æç®€åˆ›å»ºæ–¹æ³•</h3>
<pre><code class="language-java">public class Shoe {
    @Inject
    public Shoe() {
    }
    @Override
    public String toString() {
        return &quot;é‹å­&quot;;
    }
}
</code></pre>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    ...
    @Inject
    Shoe shoe;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
          ...
        tv.setText(&quot;æˆ‘ç°åœ¨æœ‰&quot; + cloth + &quot;å’Œ&quot; + shoe);
    }
}
</code></pre>
<h3 id="å¤æ‚åˆ›å»ºæ–¹æ³•">å¤æ‚åˆ›å»ºæ–¹æ³•</h3>
<h4 id="beané‡Œä¼šä¾èµ–åˆ°å…¶ä»–å‚æ•°">beané‡Œä¼šä¾èµ–åˆ°å…¶ä»–å‚æ•°</h4>
<pre><code class="language-java">public class Clothes {
    private Cloth cloth;
    public Clothes(Cloth cloth) {
        this.cloth = cloth;
    }
    public Cloth getCloth() {
        return cloth;
    }
    @Override
    public String toString() {
        return cloth.getColor() + &quot;è¡£æœ&quot;;
    }

}
</code></pre>
<h4 id="åœ¨moduleç±»ä¸­å¢åŠ æä¾›æ–¹æ³•">åœ¨Moduleç±»ä¸­å¢åŠ æä¾›æ–¹æ³•</h4>
<pre><code class="language-java">    @Provides
    public Clothes getClothes(Cloth cloth){
        return new Clothes(cloth);
    }
</code></pre>
<h3 id="ä¾èµ–æ€»ç»“">ä¾èµ–æ€»ç»“</h3>
<p>ä¸€ä¸ªæ˜¯æ³¨è§£äº†@Injectçš„æ„é€ æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åœ¨Moduleé‡Œæä¾›çš„ä¾èµ–ï¼ŒDagger2é€‰æ‹©ä¾èµ–æä¾›çš„è§„åˆ™æ˜¯ï¼šDagger2é€’å½’çš„æä¾›ä¾èµ–</p>
<ul>
<li>æ­¥éª¤1ï¼šæŸ¥æ‰¾Moduleä¸­æ˜¯å¦å­˜åœ¨åˆ›å»ºè¯¥ç±»çš„æ–¹æ³•ã€‚</li>
<li>æ­¥éª¤2ï¼šè‹¥å­˜åœ¨åˆ›å»ºç±»æ–¹æ³•ï¼ŒæŸ¥çœ‹è¯¥æ–¹æ³•æ˜¯å¦å­˜åœ¨å‚æ•°</li>
<li>æ­¥éª¤2.1ï¼šè‹¥å­˜åœ¨å‚æ•°ï¼Œåˆ™æŒ‰ä»æ­¥éª¤1å¼€å§‹ä¾æ¬¡åˆå§‹åŒ–æ¯ä¸ªå‚æ•°</li>
<li>æ­¥éª¤2.2ï¼šè‹¥ä¸å­˜åœ¨å‚æ•°ï¼Œåˆ™ç›´æ¥åˆå§‹åŒ–è¯¥ç±»å®ä¾‹ï¼Œä¸€æ¬¡ä¾èµ–æ³¨å…¥åˆ°æ­¤ç»“æŸ</li>
<li>æ­¥éª¤3ï¼šè‹¥ä¸å­˜åœ¨åˆ›å»ºç±»æ–¹æ³•ï¼Œåˆ™æŸ¥æ‰¾Injectæ³¨è§£çš„æ„é€ å‡½æ•°ï¼Œçœ‹æ„é€ å‡½æ•°æ˜¯å¦å­˜åœ¨å‚æ•°</li>
<li>æ­¥éª¤3.1ï¼šè‹¥å­˜åœ¨å‚æ•°ï¼Œåˆ™ä»æ­¥éª¤1å¼€å§‹ä¾æ¬¡åˆå§‹åŒ–æ¯ä¸ªå‚æ•°</li>
<li>æ­¥éª¤3.2ï¼šè‹¥ä¸å­˜åœ¨å‚æ•°ï¼Œåˆ™ç›´æ¥åˆå§‹åŒ–è¯¥ç±»å®ä¾‹ï¼Œä¸€æ¬¡ä¾èµ–æ³¨å…¥åˆ°æ­¤ç»“æŸ</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[MaterialDesignåŠ¨ç”»]]></title>
        <id>https://Joshua-Chang.github.io/post/MaterialDesignåŠ¨ç”»/</id>
        <link href="https://Joshua-Chang.github.io/post/MaterialDesignåŠ¨ç”»/">
        </link>
        <updated>2017-05-19T15:55:36.000Z</updated>
        <summary type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="https://ws1.sinaimg.cn/large/006tKfTcly1ffr5152xj9g30u01hc1l3.gif" alt="https://ws1.sinaimg.cn/large/006tKfTcly1ffr5152xj9g30u01hc1l3.gif" loading="lazy"></figure>
]]></summary>
        <content type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="https://ws1.sinaimg.cn/large/006tKfTcly1ffr5152xj9g30u01hc1l3.gif" alt="https://ws1.sinaimg.cn/large/006tKfTcly1ffr5152xj9g30u01hc1l3.gif" loading="lazy"></figure>
<!--more-->
<h4 id="touch-feedbackè§¦æ‘¸åé¦ˆ">Touch Feedbackï¼ˆè§¦æ‘¸åé¦ˆï¼‰</h4>
<h5 id="æ°´æ³¢çº¹æ•ˆæœ">æ°´æ³¢çº¹æ•ˆæœ</h5>
<p>5.0+è‡ªå¸¦çš„</p>
<pre><code class="language-xml"> &lt;Button android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;100dp&quot;
    android:text=&quot;@string/hello_world&quot; /&gt;
&lt;Button
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;100dp&quot;
    android:background=&quot;?attr/selectableItemBackground&quot;
    android:text=&quot;@string/hello_world&quot; /&gt;
&lt;Button
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;100dp&quot;
    android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;//æ²¡æœ‰è¾¹ç•Œï¼Œåœ†å½¢
    android:text=&quot;@string/hello_world&quot; /&gt;
</code></pre>
<p>å¯ä»¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²å’Œæ°´æ³¢çº¹çš„é¢œè‰²style</p>
<pre><code class="language-xml">	 &lt;item name=&quot;colorControlHighlight&quot;&gt;@color/colorPrimary_pink&lt;/item&gt;//é«˜äº®é¢œè‰²
        &lt;item name=&quot;colorButtonNormal&quot;&gt;@color/material_blue_grey_800&lt;/item&gt;//é»˜è®¤çš„é¢œè‰²
</code></pre>
<h4 id="reveal-effectæ­éœ²æ•ˆæœ">Reveal Effectï¼ˆæ­éœ²æ•ˆæœï¼‰</h4>
<h5 id="viewanimationutil">ViewAnimationUtil</h5>
<pre><code class="language-java">//åœ†å½¢æ°´æ³¢çº¹æ­éœ²æ•ˆæœ
	ViewAnimationUtils.createCircularReveal(
			view, //ä½œç”¨åœ¨å“ªä¸ªViewä¸Šé¢
			centerX, centerY, //æ‰©æ•£çš„ä¸­å¿ƒç‚¹
			startRadius, //å¼€å§‹æ‰©æ•£åˆå§‹åŠå¾„
			endRadius)//æ‰©æ•£ç»“æŸåŠå¾„
</code></pre>
<pre><code class="language-java">mBt1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Animator mCircularReveal = ViewAnimationUtils.createCircularReveal(mBt1, mBt1.getWidth() / 2, mBt1.getHeight() / 2, 0, mBt1.getHeight());
                mCircularReveal.setDuration(300);
                mCircularReveal.setInterpolator(new AccelerateInterpolator());
                mCircularReveal.start();
                onBackPressed();
            }
        });
public void jielu2(View view) {
        Animator mCircularReveal = ViewAnimationUtils.createCircularReveal(view, 0, 0, 0, (float) Math.hypot(view.getWidth(),view.getHeight()));
        mCircularReveal.setDuration(300);
        mCircularReveal.setInterpolator(new BounceInterpolator());
        mCircularReveal.start();
    }
</code></pre>
<h4 id="activity-transitionactivityè½¬åœºåŠ¨ç”»æ•ˆæœ">Activity transitionï¼ˆActivityè½¬åœºåŠ¨ç”»æ•ˆæœï¼‰</h4>
<p>ActivityOptionsåªæ”¯æŒAPI21ä»¥ä¸Šçš„ç‰ˆæœ¬</p>
<p>å‰æï¼šéœ€è¦ç»™ä¸¤ä¸ªActivityéƒ½è®¾ç½®å¦‚ä¸‹ï¼Œè®©å…¶å…è®¸ä½¿ç”¨è½¬åœºåŠ¨ç”»ã€‚</p>
<pre><code>//æ–¹æ³•ä¸€ï¼š
getWindow().requestFeature(Window.FEATURE_CONTENT_TRANSITIONS);
//æ–¹æ³•äºŒï¼šstyle
ä¿®æ”¹ä¸»é¢˜ï¼š&lt;item name=&quot;android:windowContentTransitions&quot;&gt;true&lt;/item&gt;
</code></pre>
<p>å…¼å®¹ç±»ï¼šActivityOptionsCompat æ­¤ç±»åœ¨ä½ç‰ˆæœ¬ä¸Šé¢å¹¶æ²¡æœ‰è½¬åœºåŠ¨ç”»æ•ˆæœï¼Œåªæ˜¯è§£å†³äº†æˆ‘ä»¬æ‰‹åŠ¨å»åˆ¤æ–­ç‰ˆæœ¬çš„é—®é¢˜è€Œå·²ã€‚</p>
<h5 id="å…±äº«å…ƒç´ è½¬æ¢">å…±äº«å…ƒç´ è½¬æ¢</h5>
<ol>
<li>ç»™ä¸¤ä¸ªActivityå½“ä¸­çš„å…±äº«å…ƒç´ viewéƒ½è®¾ç½®åŒä¸€ä¸ªåå­—---android:transitionName</li>
<li>ActivityOptionsCompatè®¾ç½®</li>
</ol>
<pre><code class="language-java">//å•ä¸ªå…ƒç´ å…±äº«
ActivityOptionsCompat optionsCompat = ActivityOptionsCompat.makeSceneTransitionAnimation(this, iv1, &quot;iv_meinv3&quot;);
	Intent intent = new Intent(this, SecondActivity.class);
	startActivity(intent, optionsCompat.toBundle());
	//å¤šä¸ªå…±äº«å…ƒç´ 
	ActivityOptionsCompat optionsCompat = ActivityOptionsCompat
			.makeSceneTransitionAnimation(this, Pair.create((View)iv1, &quot;iv1&quot;),Pair.create((View)bt, &quot;bt&quot;));
	Intent intent = new Intent(this, SecondActivity.class);
	startActivity(intent, optionsCompat.toBundle());
</code></pre>
<h5 id="æ™®é€šçš„è½¬æ¢">æ™®é€šçš„è½¬æ¢</h5>
<p>ä¸‰ç§ç³»ç»Ÿå¸¦çš„ï¼šæ»‘åŠ¨æ•ˆæœSlideã€å±•å¼€æ•ˆæœExplodeã€æ¸å˜æ˜¾ç¤ºéšè—æ•ˆæœFadeï¼ˆAPI21+ï¼‰ç›´æ¥åœ¨Activityä¸­è®¾ç½®</p>
<pre><code class="language-java">Slide mSlide=new Slide();
        mSlide.setDuration(1000);
Explode mExplode=new Explode();
        mExplode.setDuration(1000);
Fade mFade = new Fade();
        mFade.setDuration(1000);
        getWindow().setExitTransition(mExplode);
        getWindow().setEnterTransition(mExplode);
</code></pre>
]]></content>
    </entry>
</feed>